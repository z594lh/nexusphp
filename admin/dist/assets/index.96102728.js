var M=Object.defineProperty,U=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var S=(e,t,a)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,k=(e,t)=>{for(var a in t||(t={}))N.call(t,a)&&S(e,a,t[a]);if(A)for(var a of A(t))j.call(t,a)&&S(e,a,t[a]);return e},v=(e,t)=>U(e,z(t));import{_ as q,l as D,r as Q,t as T,b as i,c as P,d as C,j as w,w as l,m,f as o,g as R,a as V,E as $,h as f,u as G,o as H,e as J,F as K,z as L,A as O}from"./index.dabb5305.js";import{u as W,r as X}from"./table.6af03a03.js";const Y={name:"DialogCheck",props:{reload:Function},setup(e,t){const a=D(null),n=Q({loading:!1,visible:!1,result:"",formData:{peer_id:"",agent:""},rules:{peer_id:[{required:"true"}],agent:[{required:"true"}]}}),p=d=>{n.formData.uid=d,n.visible=!0},g=()=>{a.value.validate(async d=>{if(d){let c=await V.checkAgent(n.formData);$.success(c.msg)}})};return v(k({},T(n)),{handleSubmit:g,formRef:a,open:p})}},Z={class:"dialog-footer"},x=f("Cancel"),ee=f("Check");function te(e,t,a,n,p,g){const d=i("el-input"),c=i("el-form-item"),u=i("el-form"),_=i("el-button"),s=i("el-dialog"),h=P("loading");return C(),w(s,{title:"Check client is allowed or not",modelValue:e.visible,"onUpdate:modelValue":t[3]||(t[3]=r=>e.visible=r),center:"","close-on-click-modal":!1},{footer:l(()=>[m("span",Z,[o(_,{onClick:t[2]||(t[2]=r=>e.visible=!1)},{default:l(()=>[x]),_:1}),o(_,{type:"primary",onClick:n.handleSubmit},{default:l(()=>[ee]),_:1},8,["onClick"])])]),default:l(()=>[R((C(),w(u,{model:e.formData,"label-width":"100px",ref:"formRef",rules:e.rules},{default:l(()=>[o(c,{label:"Peer id",prop:"peer_id"},{default:l(()=>[o(d,{type:"text",modelValue:e.formData.peer_id,"onUpdate:modelValue":t[0]||(t[0]=r=>e.formData.peer_id=r)},null,8,["modelValue"])]),_:1}),o(c,{label:"Agent",prop:"agent"},{default:l(()=>[o(d,{type:"text",modelValue:e.formData.agent,"onUpdate:modelValue":t[1]||(t[1]=r=>e.formData.agent=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[h,e.loading]])]),_:1},8,["modelValue"])}var oe=q(Y,[["render",te]]);const ae={name:"ClientTable",components:{DialogCheck:oe},setup(){const e=D(null),t=G(),a=W(),n=D(null);H(()=>{console.log("MedalTable onMounted"),p()});const p=async()=>{a.loading=!0;let r=await V.listAgentAllow(a.query);X(r,a),a.loading=!1},g=()=>{t.push({name:"agent-allow-form"})},d=r=>{t.push({path:"/agent-allow-form",query:{id:r}})},c=async r=>{let y=await V.deleteAgentAllow(r);$.success(y.msg),a.query.page=1,await p()},u=r=>{a.multipleSelection=r},_=r=>{a.query.page=r,p()},s=()=>{a.query.family=""},h=()=>{n.value.open()};return v(k({},T(a)),{multipleTable:e,handleSelectionChange:u,handleAdd:g,handleEdit:d,handleDelete:c,fetchTableData:p,changePage:_,handleReset:s,handleCheck:h,refDialogCheck:n})}},le=e=>(L("data-v-68116b30"),e=e(),O(),e),ne={class:"nexus-table-header"},re={class:"left"},ie=f("Query"),se=f("Reset"),de={class:"right"},ce=f("Check"),pe=f("Add"),ue=["onClick"],_e=le(()=>m("a",{style:{cursor:"pointer"}},"Delete",-1));function me(e,t,a,n,p,g){const d=i("el-input"),c=i("el-form-item"),u=i("el-button"),_=i("el-form"),s=i("el-table-column"),h=i("el-popconfirm"),r=i("el-table"),y=i("el-pagination"),E=i("el-card"),F=i("DialogCheck"),I=P("loading");return C(),J(K,null,[o(E,{class:""},{header:l(()=>[m("div",ne,[m("div",re,[o(_,{inline:!0,model:e.query},{default:l(()=>[o(c,{label:""},{default:l(()=>[o(d,{placeholder:"Family",modelValue:e.query.family,"onUpdate:modelValue":t[0]||(t[0]=b=>e.query.family=b)},null,8,["modelValue"])]),_:1}),o(c,null,{default:l(()=>[o(u,{type:"primary",onClick:n.fetchTableData},{default:l(()=>[ie]),_:1},8,["onClick"]),o(u,{type:"primary",onClick:n.handleReset},{default:l(()=>[se]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),m("div",de,[o(u,{type:"primary",icon:"Check",onClick:n.handleCheck},{default:l(()=>[ce]),_:1},8,["onClick"]),o(u,{type:"primary",icon:"Plus",onClick:n.handleAdd},{default:l(()=>[pe]),_:1},8,["onClick"])])])]),default:l(()=>[R((C(),w(r,{ref:"multipleTable",data:e.tableData,"tooltip-effect":"dark",onSelectionChange:n.handleSelectionChange},{default:l(()=>[o(s,{type:"selection",width:"55"}),o(s,{prop:"id",label:"Id",width:"50"}),o(s,{prop:"family",label:"Family"}),o(s,{prop:"start_name",label:"Start name"}),o(s,{prop:"peer_id_start",label:"Peer id start"}),o(s,{prop:"peer_id_pattern",label:"Peer id pattern"}),o(s,{prop:"agent_start",label:"Agent start"}),o(s,{prop:"agent_pattern",label:"Agent pattern"}),o(s,{label:"Action",width:"120"},{default:l(b=>[m("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:B=>n.handleEdit(b.row.id)},"Edit",8,ue),o(h,{title:"Confirm Delete ?",onConfirm:B=>n.handleDelete(b.row.id)},{reference:l(()=>[_e]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[I,e.loading]]),o(y,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.perPage,"current-page":e.currentPage,onCurrentChange:n.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1}),o(F,{ref:"refDialogCheck"},null,512)],64)}var be=q(ae,[["render",me],["__scopeId","data-v-68116b30"]]);export{be as default};
