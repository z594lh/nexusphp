var B=Object.defineProperty,G=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var T=(t,o,h)=>o in t?B(t,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):t[o]=h,w=(t,o)=>{for(var h in o||(o={}))L.call(o,h)&&T(t,h,o[h]);if(C)for(var h of C(o))O.call(o,h)&&T(t,h,o[h]);return t},k=(t,o)=>G(t,j(o));import{_ as x,l as y,v as I,u as U,r as N,B as A,o as $,a as g,x as M,t as Y,b as c,d as V,j as E,w as a,f as e,E as S,m as u,h as n,s as P,e as q,k as H,F}from"./index.dabb5305.js";import{u as W,r as z}from"./table.6af03a03.js";const Q={name:"SettingFormBasic",setup(){const t=y(null),o=I(),h=U(),{id:_}=o.query,f=N({token:A("token")||"",id:_,allClasses:[],formData:{basic:{SITENAME:""}},rules:{"basic.name":[{required:"true"}]}});$(()=>{if(_)g.getExam(_).then(m=>{f.formData.name=m.data.name,f.formData.description=m.data.description,f.formData.begin=m.data.begin,f.formData.end=m.data.end,f.formData.duration=m.data.duration,f.formData.indexes=m.data.indexes,f.formData.filters=m.data.filters,f.formData.status=m.data.status,f.formData.is_discovered=m.data.is_discovered});else{let m=g.listExamIndex();f.formData.indexes=m.data}}),M(()=>{});const p=()=>{t.value.validate(async m=>{if(m){let b=f.formData;b.begin&&(b.begin=dayjs(b.begin).format("YYYY-MM-DD HH:mm:ss")),b.end&&(b.end=dayjs(b.end).format("YYYY-MM-DD HH:mm:ss")),console.log(b),_?await g.updateExam(_,b):await g.storeExam(b),await h.push({name:"exam"})}})},s=m=>{const b=m.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(b))return S.error("\u8BF7\u4E0A\u4F20 jpg\u3001jpeg\u3001png \u683C\u5F0F\u7684\u56FE\u7247"),!1},i=m=>{f.formData.goodsCoverImg=m.data||""},d=m=>{f.categoryId=m[2]||0};return k(w({},Y(f)),{formRef:t,submitAdd:p,handleBeforeUpload:s,handleUrlSuccess:i,handleChangeCate:d})}},K=u("div",{class:"nexus-help-text"}," Website name ",-1),X=n("Submit");function J(t,o,h,_,f,p){const s=c("el-input"),i=c("el-form-item"),d=c("el-button"),m=c("el-form");return V(),E(m,{model:t.formData,rules:t.rules,ref:"formRef","label-width":"200px",class:"formData"},{default:a(()=>[e(i,{label:"Site Name",prop:"basic.SITENAME"},{default:a(()=>[e(s,{modelValue:t.formData.basic.SITENAME,"onUpdate:modelValue":o[0]||(o[0]=b=>t.formData.basic.SITENAME=b),placeholder:""},null,8,["modelValue"]),K]),_:1}),e(i,null,{default:a(()=>[e(d,{type:"primary",onClick:o[1]||(o[1]=b=>_.submitAdd())},{default:a(()=>[X]),_:1})]),_:1})]),_:1},8,["model","rules"])}var Z=x(Q,[["render",J]]);const ee={name:"SettingFormBasic",setup(){const{proxy:t}=P();console.log("proxy",t);const o=y(null),h=I(),_=U(),{id:f}=h.query,p=N({token:A("token")||"",id:f,allClasses:[],formData:{main:{site_online:"",invitesystem:"",iniupload:"",invite_count:"",invite_timeout:"",verification:"",waitsystem:"",maxdlsystemyes:"",showpolls:"",showstats:"",showtrackerload:"",showforumstats:"",showlastxforumposts:"",showlastxtorrents:"",showhotmovies:"",showclassicmovies:"",showimdbinfo:"",enable_pt_gen_system:"",pt_gen_api_point:"",enablenfo:"",enable_technical_info:"",enableschoolyes:"",restrictemail:"",showshoutbox:"",showfunbox:"",showoffer:"",donation:""}},rules:{"main.site_online":[{required:"true"}]}});$(()=>{if(b(),D(),f)g.getExam(f).then(l=>{p.formData.name=l.data.name,p.formData.description=l.data.description,p.formData.begin=l.data.begin,p.formData.end=l.data.end,p.formData.duration=l.data.duration,p.formData.indexes=l.data.indexes,p.formData.filters=l.data.filters,p.formData.status=l.data.status,p.formData.is_discovered=l.data.is_discovered});else{let l=g.listExamIndex();p.formData.indexes=l.data}}),M(()=>{});const s=()=>{o.value.validate(async l=>{if(l){let r=p.formData;r.begin&&(r.begin=dayjs(r.begin).format("YYYY-MM-DD HH:mm:ss")),r.end&&(r.end=dayjs(r.end).format("YYYY-MM-DD HH:mm:ss")),console.log(r),f?await g.updateExam(f,r):await g.storeExam(r),await _.push({name:"exam"})}})},i=l=>{const r=l.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(r))return S.error("\u8BF7\u4E0A\u4F20 jpg\u3001jpeg\u3001png \u683C\u5F0F\u7684\u56FE\u7247"),!1},d=l=>{p.formData.goodsCoverImg=l.data||""},m=l=>{p.categoryId=l[2]||0},b=async()=>{let l=await g.listClass();p.allClasses=l.data},D=async()=>{let l=await g.listExamIndex();p.formData.indexes=l.data};return k(w({},Y(p)),{formRef:o,submitAdd:s,handleBeforeUpload:i,handleUrlSuccess:d,handleChangeCate:m})}},ae=n("Yes"),oe=n("No"),te=u("div",{class:"nexus-help-text"}," Default 'yes'. Want to turn off your site while performing updates or other types of maintenance? Please Note: Administrators will still be able to see the site. ",-1),le=n("Yes"),se=n("No"),ne=u("div",{class:"nexus-help-text"}," Default 'yes'. Allow Registrations via Invite System. ",-1),ie=u("div",{class:"nexus-help-text"}," How many uploading credit (in Byte, i.e. 1073741824 = 1GB) should each user be given upon registration? Default '0'. ",-1),de=u("div",{class:"nexus-help-text"}," How many invites should each user be given upon registration? Default '0'. ",-1),re=u("div",{class:"nexus-help-text"}," In days. Delete invite code after X days who didn't respond the invite request. Default '7'. ",-1),ue=n("Yes"),me=n("No"),fe=u("div",{class:"nexus-help-text"}," Allow open registrations. Default 'yes'. ",-1),pe=n("Email"),_e=n("Admin"),be=n("Automatically"),he=u("div",{class:"nexus-help-text"}," EMAIL: Sent confirmation email. ADMIN: Manual activate. AUTOMATIC: Activate user after registration. ",-1),ce=n("Yes"),De=n("No"),ge=u("div",{class:"nexus-help-text"}," Enable or disable wait system (see FAQ). ",-1),ve=n("Yes"),ye=n("No"),Ve=u("div",{class:"nexus-help-text"}," Default 'no'. Enable or disable maximum concurrent downloads (AKA Max Slots) (see FAQ). ",-1),we=n("Yes"),ke=n("No"),Se=u("div",{class:"nexus-help-text"}," Default 'yes'. Show POLL system on main page. ",-1),xe=n("Yes"),Ue=n("No"),$e=u("div",{class:"nexus-help-text"}," Default 'yes'. Show STATS system on main page. ",-1),Ye=n("Yes"),Ee=n("No"),Ie=u("div",{class:"nexus-help-text"}," Default 'no'. Show Last x Forum Posts on main page. ",-1),Ne=n("Yes"),Ae=n("No"),Me=u("div",{class:"nexus-help-text"}," Default 'no'. Show Last x Torrents on main page. ",-1),Ce=n("Yes"),Te=n("No"),qe=u("div",{class:"nexus-help-text"}," Default 'yes'. Show Server Load on main page. ",-1),He=n("Yes"),Fe=n("No"),Re=u("div",{class:"nexus-help-text"}," Default 'yes'. Show forum stats on forums page. ",-1),Be=n("Yes"),Ge=n("No"),je=u("div",{class:"nexus-help-text"}," Default 'yes'. Show hot resources on main page. Hot resources are automatically picked by system or manually by staff members. ",-1),Le=n("Yes"),Oe=n("No"),Pe=u("div",{class:"nexus-help-text"}," Default 'no'. Show classic resources on main page. Only designated moderators or above can pick classic resources. ",-1),We=n("Yes"),ze=n("No"),Qe=u("div",{class:"nexus-help-text"}," Default 'yes'. System-wide IMDb info setting. ",-1),Ke=n("Yes"),Xe=n("No"),Je=u("div",{class:"nexus-help-text"}," Default 'no'. System-wide PT-Gen info setting. ",-1),Ze=u("div",{class:"nexus-help-text"}," Default '', when required, reference to Documatation to build yourself ",-1),ea=n("Yes"),aa=n("No"),oa=u("div",{class:"nexus-help-text"}," Default 'yes'. System-wide NFO setting. ",-1),ta=n("Yes"),la=n("No"),sa=u("div",{class:"nexus-help-text"}," Default 'No'. Technical Information comes from software MediaInfo Text view ",-1),na=n("Yes"),ia=n("No"),da=u("div",{class:"nexus-help-text"},[n(" Default 'no'. "),u("span",{style:{color:"red","font-weight":"bold"}},"DO NOT"),n(" enable this unless you know what you are doing! ")],-1),ra=n("Yes"),ua=n("No"),ma=u("div",{class:"nexus-help-text"}," Default 'no'. Set it to 'yes' to only allow certain email domains to register. See here. ",-1),fa=n("Yes"),pa=n("No"),_a=u("div",{class:"nexus-help-text"}," Default 'yes'. Show shoutbox on main page. ",-1),ba=n("Yes"),ha=n("No"),ca=u("div",{class:"nexus-help-text"}," Default 'no'. Show funbox on main page. ",-1),Da=n("Yes"),ga=n("No"),va=u("div",{class:"nexus-help-text"}," Default 'yes'. Enable or disable offer section. ",-1),ya=n("Yes"),Va=n("No"),wa=u("div",{class:"nexus-help-text"}," Show donation and donation top ten. ",-1),ka=n("Submit");function Sa(t,o,h,_,f,p){const s=c("el-radio"),i=c("el-radio-group"),d=c("el-form-item"),m=c("el-input"),b=c("el-button"),D=c("el-form");return V(),E(D,{model:t.formData,rules:t.rules,ref:"formRef","label-width":"250px",class:"formData"},{default:a(()=>[e(d,{label:"Site online",prop:"main.site_online"},{default:a(()=>[e(i,{modelValue:t.formData.main.site_online,"onUpdate:modelValue":o[0]||(o[0]=l=>t.formData.main.site_online=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ae]),_:1}),e(s,{label:"no"},{default:a(()=>[oe]),_:1})]),_:1},8,["modelValue"]),te]),_:1}),e(d,{label:"Enable invite system",prop:"main.invitesystem"},{default:a(()=>[e(i,{modelValue:t.formData.main.invitesystem,"onUpdate:modelValue":o[1]||(o[1]=l=>t.formData.main.invitesystem=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[le]),_:1}),e(s,{label:"no"},{default:a(()=>[se]),_:1})]),_:1},8,["modelValue"]),ne]),_:1}),e(d,{label:"Initial uploading amount",prop:"main.iniupload"},{default:a(()=>[e(m,{modelValue:t.formData.main.iniupload,"onUpdate:modelValue":o[2]||(o[2]=l=>t.formData.main.iniupload=l),placeholder:"",type:"number"},null,8,["modelValue"]),ie]),_:1}),e(d,{label:"Initial number of invites",prop:"main.invite_count"},{default:a(()=>[e(m,{modelValue:t.formData.main.invite_count,"onUpdate:modelValue":o[3]||(o[3]=l=>t.formData.main.invite_count=l),placeholder:"",type:"number"},null,8,["modelValue"]),de]),_:1}),e(d,{label:"Invite timeout",prop:"main.invite_timeout"},{default:a(()=>[e(m,{modelValue:t.formData.main.invite_timeout,"onUpdate:modelValue":o[4]||(o[4]=l=>t.formData.main.invite_timeout=l),placeholder:"",type:"number"},null,8,["modelValue"]),re]),_:1}),e(d,{label:"Enable registration system",prop:"main.registration"},{default:a(()=>[e(i,{modelValue:t.formData.main.registration,"onUpdate:modelValue":o[5]||(o[5]=l=>t.formData.main.registration=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ue]),_:1}),e(s,{label:"no"},{default:a(()=>[me]),_:1})]),_:1},8,["modelValue"]),fe]),_:1}),e(d,{label:"Verification type",prop:"main.verification"},{default:a(()=>[e(i,{modelValue:t.formData.main.verification,"onUpdate:modelValue":o[6]||(o[6]=l=>t.formData.main.verification=l)},{default:a(()=>[e(s,{label:"email"},{default:a(()=>[pe]),_:1}),e(s,{label:"admin"},{default:a(()=>[_e]),_:1}),e(s,{label:"automatic"},{default:a(()=>[be]),_:1})]),_:1},8,["modelValue"]),he]),_:1}),e(d,{label:"Enable wait system",prop:"main.waitsystem"},{default:a(()=>[e(i,{modelValue:t.formData.main.waitsystem,"onUpdate:modelValue":o[7]||(o[7]=l=>t.formData.main.waitsystem=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ce]),_:1}),e(s,{label:"no"},{default:a(()=>[De]),_:1})]),_:1},8,["modelValue"]),ge]),_:1}),e(d,{label:"Enable max slots system",prop:"main.maxdlsystemyes"},{default:a(()=>[e(i,{modelValue:t.formData.main.maxdlsystemyes,"onUpdate:modelValue":o[8]||(o[8]=l=>t.formData.main.maxdlsystemyes=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ve]),_:1}),e(s,{label:"no"},{default:a(()=>[ye]),_:1})]),_:1},8,["modelValue"]),Ve]),_:1}),e(d,{label:"Show polls",prop:"main.showpolls"},{default:a(()=>[e(i,{modelValue:t.formData.main.showpolls,"onUpdate:modelValue":o[9]||(o[9]=l=>t.formData.main.showpolls=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[we]),_:1}),e(s,{label:"no"},{default:a(()=>[ke]),_:1})]),_:1},8,["modelValue"]),Se]),_:1}),e(d,{label:"Show stats",prop:"main.showstats"},{default:a(()=>[e(i,{modelValue:t.formData.main.showstats,"onUpdate:modelValue":o[10]||(o[10]=l=>t.formData.main.showstats=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[xe]),_:1}),e(s,{label:"no"},{default:a(()=>[Ue]),_:1})]),_:1},8,["modelValue"]),$e]),_:1}),e(d,{label:"Show last x forum posts",prop:"main.showlastxforumposts"},{default:a(()=>[e(i,{modelValue:t.formData.main.showlastxforumposts,"onUpdate:modelValue":o[11]||(o[11]=l=>t.formData.main.showlastxforumposts=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Ye]),_:1}),e(s,{label:"no"},{default:a(()=>[Ee]),_:1})]),_:1},8,["modelValue"]),Ie]),_:1}),e(d,{label:"Show Last x Torrents",prop:"main.showlastxtorrents"},{default:a(()=>[e(i,{modelValue:t.formData.main.showlastxtorrents,"onUpdate:modelValue":o[12]||(o[12]=l=>t.formData.main.showlastxtorrents=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Ne]),_:1}),e(s,{label:"no"},{default:a(()=>[Ae]),_:1})]),_:1},8,["modelValue"]),Me]),_:1}),e(d,{label:"Show server load",prop:"main.showtrackerload"},{default:a(()=>[e(i,{modelValue:t.formData.main.showtrackerload,"onUpdate:modelValue":o[13]||(o[13]=l=>t.formData.main.showtrackerload=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Ce]),_:1}),e(s,{label:"no"},{default:a(()=>[Te]),_:1})]),_:1},8,["modelValue"]),qe]),_:1}),e(d,{label:"Show forum stats",prop:"main.showforumstats"},{default:a(()=>[e(i,{modelValue:t.formData.main.showforumstats,"onUpdate:modelValue":o[14]||(o[14]=l=>t.formData.main.showforumstats=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[He]),_:1}),e(s,{label:"no"},{default:a(()=>[Fe]),_:1})]),_:1},8,["modelValue"]),Re]),_:1}),e(d,{label:"Show hot",prop:"main.showhotmovies"},{default:a(()=>[e(i,{modelValue:t.formData.main.showhotmovies,"onUpdate:modelValue":o[15]||(o[15]=l=>t.formData.main.showhotmovies=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Be]),_:1}),e(s,{label:"no"},{default:a(()=>[Ge]),_:1})]),_:1},8,["modelValue"]),je]),_:1}),e(d,{label:"Show classic",prop:"main.showclassicmovies"},{default:a(()=>[e(i,{modelValue:t.formData.main.showclassicmovies,"onUpdate:modelValue":o[16]||(o[16]=l=>t.formData.main.showclassicmovies=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Le]),_:1}),e(s,{label:"no"},{default:a(()=>[Oe]),_:1})]),_:1},8,["modelValue"]),Pe]),_:1}),e(d,{label:"Enable IMDb system",prop:"main.showimdbinfo"},{default:a(()=>[e(i,{modelValue:t.formData.main.showimdbinfo,"onUpdate:modelValue":o[17]||(o[17]=l=>t.formData.main.showimdbinfo=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[We]),_:1}),e(s,{label:"no"},{default:a(()=>[ze]),_:1})]),_:1},8,["modelValue"]),Qe]),_:1}),e(d,{label:"Enable PT-Gen system",prop:"main.enable_pt_gen_system"},{default:a(()=>[e(i,{modelValue:t.formData.main.enable_pt_gen_system,"onUpdate:modelValue":o[18]||(o[18]=l=>t.formData.main.enable_pt_gen_system=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Ke]),_:1}),e(s,{label:"no"},{default:a(()=>[Xe]),_:1})]),_:1},8,["modelValue"]),Je]),_:1}),e(d,{label:"PT-Gen api point",prop:"main.pt_gen_api_point"},{default:a(()=>[e(m,{modelValue:t.formData.main.pt_gen_api_point,"onUpdate:modelValue":o[19]||(o[19]=l=>t.formData.main.pt_gen_api_point=l),placeholder:""},null,8,["modelValue"]),Ze]),_:1}),e(d,{label:"Enable NFO",prop:"main.enablenfo"},{default:a(()=>[e(i,{modelValue:t.formData.main.enablenfo,"onUpdate:modelValue":o[20]||(o[20]=l=>t.formData.main.enablenfo=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ea]),_:1}),e(s,{label:"no"},{default:a(()=>[aa]),_:1})]),_:1},8,["modelValue"]),oa]),_:1}),e(d,{label:"Enable technical information",prop:"main.enable_technical_info"},{default:a(()=>[e(i,{modelValue:t.formData.main.enable_technical_info,"onUpdate:modelValue":o[21]||(o[21]=l=>t.formData.main.enable_technical_info=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ta]),_:1}),e(s,{label:"no"},{default:a(()=>[la]),_:1})]),_:1},8,["modelValue"]),sa]),_:1}),e(d,{label:"Enable school system",prop:"main.enableschoolyes"},{default:a(()=>[e(i,{modelValue:t.formData.main.enableschoolyes,"onUpdate:modelValue":o[22]||(o[22]=l=>t.formData.main.enableschoolyes=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[na]),_:1}),e(s,{label:"no"},{default:a(()=>[ia]),_:1})]),_:1},8,["modelValue"]),da]),_:1}),e(d,{label:"Restrict email domain",prop:"main.restrictemail"},{default:a(()=>[e(i,{modelValue:t.formData.main.restrictemail,"onUpdate:modelValue":o[23]||(o[23]=l=>t.formData.main.restrictemail=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ra]),_:1}),e(s,{label:"no"},{default:a(()=>[ua]),_:1})]),_:1},8,["modelValue"]),ma]),_:1}),e(d,{label:"Show Shoutbox",prop:"main.showshoutbox"},{default:a(()=>[e(i,{modelValue:t.formData.main.showshoutbox,"onUpdate:modelValue":o[24]||(o[24]=l=>t.formData.main.showshoutbox=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[fa]),_:1}),e(s,{label:"no"},{default:a(()=>[pa]),_:1})]),_:1},8,["modelValue"]),_a]),_:1}),e(d,{label:"Show funbox",prop:"main.showfunbox"},{default:a(()=>[e(i,{modelValue:t.formData.main.showfunbox,"onUpdate:modelValue":o[25]||(o[25]=l=>t.formData.main.showfunbox=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ba]),_:1}),e(s,{label:"no"},{default:a(()=>[ha]),_:1})]),_:1},8,["modelValue"]),ca]),_:1}),e(d,{label:"Enable offer section",prop:"main.showoffer"},{default:a(()=>[e(i,{modelValue:t.formData.main.showoffer,"onUpdate:modelValue":o[26]||(o[26]=l=>t.formData.main.showoffer=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Da]),_:1}),e(s,{label:"no"},{default:a(()=>[ga]),_:1})]),_:1},8,["modelValue"]),va]),_:1}),e(d,{label:"Enable Donation",prop:"main.donation"},{default:a(()=>[e(i,{modelValue:t.formData.main.donation,"onUpdate:modelValue":o[27]||(o[27]=l=>t.formData.main.donation=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ya]),_:1}),e(s,{label:"no"},{default:a(()=>[Va]),_:1})]),_:1},8,["modelValue"]),wa]),_:1}),e(d,null,{default:a(()=>[e(b,{type:"primary",onClick:o[28]||(o[28]=l=>_.submitAdd())},{default:a(()=>[ka]),_:1})]),_:1})]),_:1},8,["model","rules"])}var xa=x(ee,[["render",Sa]]);const Ua={name:"SettingFormBasic",setup(){const t=y(null),o=I();U();const{id:h}=o.query,_=N({loading:!1,token:A("token")||"",id:h,allClasses:[],formData:{backup:{enabled:"",frequency:"",hour:"",minute:"",google_drive_client_id:"",google_drive_client_secret:"",google_drive_refresh_token:"",google_drive_folder_id:""}},rules:{"backup.enabled":[{required:"true"}]}});$(()=>{}),M(()=>{});const f=()=>{t.value.validate(async i=>{if(i){let d=_.formData;console.log(d);let m=await g.storeSetting(d);S.success(m.msg),await s()}})},p=i=>{const d=i.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(d))return S.error("\u8BF7\u4E0A\u4F20 jpg\u3001jpeg\u3001png \u683C\u5F0F\u7684\u56FE\u7247"),!1},s=async()=>{_.loading=!0;let i=await g.listSetting({prefix:"backup"});console.log("listSetting",i),_.formData=i.data,_.loading=!1};return k(w({},Y(_)),{formRef:t,submitAdd:f,handleBeforeUpload:p,listSetting:s})}},$a=n("Yes"),Ya=n("No"),Ea=u("div",{class:"nexus-help-text"}," Enable backup or not. ",-1),Ia=n("Daily"),Na=n("Hourly"),Aa=u("div",{class:"nexus-help-text"}," Backup Frequency. ",-1),Ma=u("div",{class:"nexus-help-text"}," Do backup at this hour. ",-1),Ca=u("div",{class:"nexus-help-text"}," Do backup at this minute, If frequency = 'hourly', this value will be ignore. ",-1),Ta=u("div",{class:"nexus-help-text"}," Google drive client ID. ",-1),qa=u("div",{class:"nexus-help-text"}," Google drive client secret. ",-1),Ha=u("div",{class:"nexus-help-text"}," Google drive refresh token. ",-1),Fa=u("div",{class:"nexus-help-text"}," Google drive folder ID. If not set, will store in root. ",-1),Ra=n("Yes"),Ba=n("No"),Ga=u("div",{class:"nexus-help-text"},[n(" Via ftp or not. If yes, add configuration to .env, refer to "),u("a",{href:"https://laravel.com/docs/master/filesystem#ftp-driver-configuration"},"Laravel doc.")],-1),ja=n("Yes"),La=n("No"),Oa=u("div",{class:"nexus-help-text"},[n(" Via sftp or not. If yes, add configuration to .env, refer to "),u("a",{href:"https://laravel.com/docs/master/filesystem#sftp-driver-configuration"},"Laravel doc.")],-1),Pa=n("Submit");function Wa(t,o,h,_,f,p){const s=c("el-radio"),i=c("el-form-item"),d=c("el-option"),m=c("el-select"),b=c("el-input"),D=c("el-button"),l=c("el-form");return V(),E(l,{model:t.formData,rules:t.rules,ref:"formRef","label-width":"250px",class:"formData",size:"mini","v-loading":t.loading},{default:a(()=>[e(i,{label:"Enabled",prop:"backup.enabled"},{default:a(()=>[e(s,{modelValue:t.formData.backup.enabled,"onUpdate:modelValue":o[0]||(o[0]=r=>t.formData.backup.enabled=r),label:"yes"},{default:a(()=>[$a]),_:1},8,["modelValue"]),e(s,{modelValue:t.formData.backup.enabled,"onUpdate:modelValue":o[1]||(o[1]=r=>t.formData.backup.enabled=r),label:"no"},{default:a(()=>[Ya]),_:1},8,["modelValue"]),Ea]),_:1}),e(i,{label:"Frequency",prop:"backup.frequency"},{default:a(()=>[e(s,{modelValue:t.formData.backup.frequency,"onUpdate:modelValue":o[2]||(o[2]=r=>t.formData.backup.frequency=r),label:"daily"},{default:a(()=>[Ia]),_:1},8,["modelValue"]),e(s,{modelValue:t.formData.backup.frequency,"onUpdate:modelValue":o[3]||(o[3]=r=>t.formData.backup.frequency=r),label:"hourly"},{default:a(()=>[Na]),_:1},8,["modelValue"]),Aa]),_:1}),e(i,{label:"Hour",prop:"backup.hour"},{default:a(()=>[e(m,{modelValue:t.formData.backup.hour,"onUpdate:modelValue":o[4]||(o[4]=r=>t.formData.backup.hour=r),filterable:""},{default:a(()=>[(V(),q(F,null,H(24,r=>e(d,{key:r,label:r-1,value:r-1},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),Ma]),_:1}),e(i,{label:"Minute",prop:"backup.minute"},{default:a(()=>[e(m,{modelValue:t.formData.backup.minute,"onUpdate:modelValue":o[5]||(o[5]=r=>t.formData.backup.minute=r),filterable:""},{default:a(()=>[(V(),q(F,null,H(60,r=>e(d,{key:r,label:r-1,value:r-1},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),Ca]),_:1}),e(i,{label:"Google drive client ID",prop:"backup.google_drive_client_id"},{default:a(()=>[e(b,{modelValue:t.formData.backup.google_drive_client_id,"onUpdate:modelValue":o[6]||(o[6]=r=>t.formData.backup.google_drive_client_id=r),label:"Google drive client ID"},null,8,["modelValue"]),Ta]),_:1}),e(i,{label:"Google drive client secret",prop:"backup.google_drive_client_secret"},{default:a(()=>[e(b,{modelValue:t.formData.backup.google_drive_client_secret,"onUpdate:modelValue":o[7]||(o[7]=r=>t.formData.backup.google_drive_client_secret=r),label:"Google drive client secret"},null,8,["modelValue"]),qa]),_:1}),e(i,{label:"Google drive refresh token",prop:"backup.google_drive_refresh_token"},{default:a(()=>[e(b,{modelValue:t.formData.backup.google_drive_refresh_token,"onUpdate:modelValue":o[8]||(o[8]=r=>t.formData.backup.google_drive_refresh_token=r),label:"Google drive refresh token"},null,8,["modelValue"]),Ha]),_:1}),e(i,{label:"Google drive folder ID",prop:"backup.google_drive_folder_id"},{default:a(()=>[e(b,{modelValue:t.formData.backup.google_drive_folder_id,"onUpdate:modelValue":o[9]||(o[9]=r=>t.formData.backup.google_drive_folder_id=r),label:"Google drive folder ID"},null,8,["modelValue"]),Fa]),_:1}),e(i,{label:"Via ftp",prop:"backup.via_ftp"},{default:a(()=>[e(s,{modelValue:t.formData.backup.via_ftp,"onUpdate:modelValue":o[10]||(o[10]=r=>t.formData.backup.via_ftp=r),label:"yes"},{default:a(()=>[Ra]),_:1},8,["modelValue"]),e(s,{modelValue:t.formData.backup.via_ftp,"onUpdate:modelValue":o[11]||(o[11]=r=>t.formData.backup.via_ftp=r),label:"no"},{default:a(()=>[Ba]),_:1},8,["modelValue"]),Ga]),_:1}),e(i,{label:"Via sftp",prop:"backup.via_sftp"},{default:a(()=>[e(s,{modelValue:t.formData.backup.via_sftp,"onUpdate:modelValue":o[12]||(o[12]=r=>t.formData.backup.via_sftp=r),label:"yes"},{default:a(()=>[ja]),_:1},8,["modelValue"]),e(s,{modelValue:t.formData.backup.via_sftp,"onUpdate:modelValue":o[13]||(o[13]=r=>t.formData.backup.via_sftp=r),label:"no"},{default:a(()=>[La]),_:1},8,["modelValue"]),Oa]),_:1}),e(i,null,{default:a(()=>[e(D,{type:"primary",onClick:o[14]||(o[14]=r=>_.submitAdd())},{default:a(()=>[Pa]),_:1})]),_:1})]),_:1},8,["model","rules","v-loading"])}var za=x(Ua,[["render",Wa]]);const Qa={name:"SettingFormHR",setup(){const t=y(null),o=I();U();const{id:h}=o.query,_=N({token:A("token")||"",id:h,allClasses:[],formData:{hr:{mode:"",inspect_time:"",seed_time_minimum:"",ignore_when_ratio_reach:"",ban_user_when_counts_reach:""}},rules:{"hr.enabled":[{required:"true"}]}});$(()=>{}),M(()=>{});const f=()=>{t.value.validate(async s=>{if(s){let i=_.formData;console.log(i);let d=await g.storeSetting(i);S.success(d.msg),await p()}})},p=async()=>{let s=await g.listSetting({prefix:"hr"});console.log("listSetting",s),_.formData=s.data};return k(w({},Y(_)),{formRef:t,submitAdd:f,listSetting:p})}},Ka=n("Disabled"),Xa=n("Manual"),Ja=n("Global"),Za=u("div",{class:"nexus-help-text"}," Set H&R mode. ",-1),eo=u("div",{class:"nexus-help-text"}," Inspect time duration after download complete(Unit: Hour). ",-1),ao=u("div",{class:"nexus-help-text"}," Seed time minimum (Unit: Hour, must be less than Inspect time). ",-1),oo=u("div",{class:"nexus-help-text"}," When ratio reach this value, this H&R will be ignored. ",-1),to=u("div",{class:"nexus-help-text"}," When total H&R counts reach this value, user account will be disabled. ",-1),lo=n("Submit");function so(t,o,h,_,f,p){const s=c("el-radio"),i=c("el-form-item"),d=c("el-input"),m=c("el-button"),b=c("el-form");return V(),E(b,{model:t.formData,rules:t.rules,ref:"formRef","label-width":"250px",class:"formData",size:"mini"},{default:a(()=>[e(i,{label:"Mode",prop:"hr.mode"},{default:a(()=>[e(s,{modelValue:t.formData.hr.mode,"onUpdate:modelValue":o[0]||(o[0]=D=>t.formData.hr.mode=D),label:"disabled"},{default:a(()=>[Ka]),_:1},8,["modelValue"]),e(s,{modelValue:t.formData.hr.mode,"onUpdate:modelValue":o[1]||(o[1]=D=>t.formData.hr.mode=D),label:"manual"},{default:a(()=>[Xa]),_:1},8,["modelValue"]),e(s,{modelValue:t.formData.hr.mode,"onUpdate:modelValue":o[2]||(o[2]=D=>t.formData.hr.mode=D),label:"global"},{default:a(()=>[Ja]),_:1},8,["modelValue"]),Za]),_:1}),e(i,{label:"Inspect time",prop:"hr.inspect_time"},{default:a(()=>[e(d,{modelValue:t.formData.hr.inspect_time,"onUpdate:modelValue":o[3]||(o[3]=D=>t.formData.hr.inspect_time=D),type:"number"},null,8,["modelValue"]),eo]),_:1}),e(i,{label:"Seed time minimum",prop:"hr.seed_time_minimum"},{default:a(()=>[e(d,{modelValue:t.formData.hr.seed_time_minimum,"onUpdate:modelValue":o[4]||(o[4]=D=>t.formData.hr.seed_time_minimum=D),type:"number"},null,8,["modelValue"]),ao]),_:1}),e(i,{label:"Ignore",prop:"hr.ignore_when_ratio_reach"},{default:a(()=>[e(d,{modelValue:t.formData.hr.ignore_when_ratio_reach,"onUpdate:modelValue":o[5]||(o[5]=D=>t.formData.hr.ignore_when_ratio_reach=D),type:"number"},null,8,["modelValue"]),oo]),_:1}),e(i,{label:"Disable user",prop:"hr.disable_user_when_counts_reach"},{default:a(()=>[e(d,{modelValue:t.formData.hr.ban_user_when_counts_reach,"onUpdate:modelValue":o[6]||(o[6]=D=>t.formData.hr.ban_user_when_counts_reach=D)},null,8,["modelValue"]),to]),_:1}),e(i,null,{default:a(()=>[e(m,{type:"primary",onClick:o[7]||(o[7]=D=>_.submitAdd())},{default:a(()=>[lo]),_:1})]),_:1})]),_:1},8,["model","rules"])}var no=x(Qa,[["render",so]]);const io={name:"Setting",components:{FormBasic:Z,FormMain:xa,FormBackup:za,FormHR:no},setup(){const t=y(null),o=U(),h=y(null),_=y(null),f=W();let p=0;const s=[h,_];$(()=>{console.log("Setting onMounted"),s[p].value.listSetting()});const i=async()=>{f.loading=!0;let v=await g.listExam(f.query);z(v,f),f.loading=!1},d=()=>{o.push({name:"exam-form"})},m=v=>{o.push({path:"/exam-form",query:{id:v}})},b=async v=>{let R=await g.deleteExam(v);S.success(R.msg),f.query.page=1,await i()},D=v=>{f.multipleSelection=v},l=v=>{f.query.page=v,i()},r=v=>{p=v.index,s[p].value.listSetting()};return k(w({},Y(f)),{multipleTable:t,handleSelectionChange:D,handleAdd:d,handleEdit:m,handleDelete:b,handleTabClick:r,fetchTableData:i,changePage:l,backup:h,hr:_})}};function ro(t,o,h,_,f,p){const s=c("FormBackup"),i=c("el-tab-pane"),d=c("FormHR"),m=c("el-tabs");return V(),E(m,{type:"border-card",onTabClick:_.handleTabClick},{default:a(()=>[e(i,{label:"Backup"},{default:a(()=>[e(s,{ref:"backup"},null,512)]),_:1}),e(i,{label:"H&R"},{default:a(()=>[e(d,{ref:"hr"},null,512)]),_:1})]),_:1},8,["onTabClick"])}var po=x(io,[["render",ro]]);export{po as default};
