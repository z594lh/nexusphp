var C=Object.defineProperty,q=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var y=(a,e,n)=>e in a?C(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,b=(a,e)=>{for(var n in e||(e={}))k.call(e,n)&&y(a,n,e[n]);if(V)for(var n of V(e))B.call(e,n)&&y(a,n,e[n]);return a},v=(a,e)=>q(a,M(e));import{_ as I,s as R,l as h,v as j,u as E,r as $,B as G,o as N,a as c,x as S,t as A,b as s,d as F,e as P,f as o,w as t,E as T,h as D}from"./index.dabb5305.js";const z={name:"MedalForm",setup(){const{proxy:a}=R();console.log("proxy",a);const e=h(null),n=j(),g=E(),{id:p}=n.query,d=$({token:G("token")||"",id:p,allClasses:[],formData:{name:"",description:"",image_large:"",image_small:"",duration:"",price:"",get_type:""},rules:{name:[{required:"true"}],price:[{required:"true"}],image_large:[{required:"true"}],image_small:[{required:"true"}],description:[{required:"true"}],get_type:[{required:"true"}]}});N(async()=>{p&&c.getMedal(p).then(l=>{d.formData.name=l.data.name,d.formData.image_large=l.data.image_large,d.formData.image_small=l.data.image_small,d.formData.description=l.data.description,d.formData.price=l.data.price,d.formData.duration=l.data.duration,d.formData.get_type=l.data.get_type})}),S(()=>{});const u=()=>{e.value.validate(async l=>{if(l){let i=d.formData;console.log(i),p?await c.updateMedal(p,i):await c.storeMedal(i),await g.push({name:"medal"})}})},m=l=>{const i=l.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(i))return T.error("\u8BF7\u4E0A\u4F20 jpg\u3001jpeg\u3001png \u683C\u5F0F\u7684\u56FE\u7247"),!1},f=l=>{d.formData.goodsCoverImg=l.data||""},_=l=>{d.categoryId=l[2]||0};return v(b({},A(d)),{formRef:e,submitAdd:u,handleBeforeUpload:m,handleUrlSuccess:f,handleChangeCate:_})}},H=D("Exchange"),J=D("Grant"),K=D("Submit");function L(a,e,n,g,p,d){const u=s("el-input"),m=s("el-form-item"),f=s("el-radio"),_=s("el-radio-group"),l=s("el-button"),i=s("el-form"),U=s("el-col"),w=s("el-row");return F(),P("div",null,[o(w,null,{default:t(()=>[o(U,{span:12},{default:t(()=>[o(i,{model:a.formData,rules:a.rules,ref:"formRef","label-width":"200px",class:"formData"},{default:t(()=>[o(m,{label:"Name",prop:"name"},{default:t(()=>[o(u,{modelValue:a.formData.name,"onUpdate:modelValue":e[0]||(e[0]=r=>a.formData.name=r),placeholder:""},null,8,["modelValue"])]),_:1}),o(m,{label:"Price",prop:"price"},{default:t(()=>[o(u,{modelValue:a.formData.price,"onUpdate:modelValue":e[1]||(e[1]=r=>a.formData.price=r),placeholder:"Seed bonus"},null,8,["modelValue"])]),_:1}),o(m,{label:"Get type",prop:"get_type"},{default:t(()=>[o(_,{modelValue:a.formData.get_type,"onUpdate:modelValue":e[2]||(e[2]=r=>a.formData.get_type=r)},{default:t(()=>[o(f,{label:1},{default:t(()=>[H]),_:1}),o(f,{label:2},{default:t(()=>[J]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(m,{label:"Image large",prop:"image_large"},{default:t(()=>[o(u,{modelValue:a.formData.image_large,"onUpdate:modelValue":e[3]||(e[3]=r=>a.formData.image_large=r),placeholder:""},null,8,["modelValue"])]),_:1}),o(m,{label:"Image small",prop:"image_small"},{default:t(()=>[o(u,{modelValue:a.formData.image_small,"onUpdate:modelValue":e[4]||(e[4]=r=>a.formData.image_small=r),placeholder:""},null,8,["modelValue"])]),_:1}),o(m,{label:"Duration",prop:"duration"},{default:t(()=>[o(u,{modelValue:a.formData.duration,"onUpdate:modelValue":e[5]||(e[5]=r=>a.formData.duration=r),placeholder:"Unit: day, if empty, it's valid forever"},null,8,["modelValue"])]),_:1}),o(m,{label:"Description",prop:"description"},{default:t(()=>[o(u,{type:"textarea",modelValue:a.formData.description,"onUpdate:modelValue":e[6]||(e[6]=r=>a.formData.description=r),placeholder:""},null,8,["modelValue"])]),_:1}),o(m,null,{default:t(()=>[o(l,{type:"primary",onClick:e[7]||(e[7]=r=>g.submitAdd())},{default:t(()=>[K]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})])}var W=I(z,[["render",L]]);export{W as default};
